<Ui xmlns="http://www.blizzard.com/wow/ui/" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://www.blizzard.com/wow/ui/ ..\..\FrameXML\UI.xsd">

<!-- Copyright 2011-2021 Mike Battersby -->

<Script file="RuleEdit.lua" />

<Button name="LiteMountRuleEditDropDownButtonTemplate" inherits="LiteMountButtonStyleTemplate" virtual="true">
    <ButtonText parentKey="Text" justifyH="left">
        <Anchors>
            <Anchor point="LEFT" x="16" />
            <Anchor point="RIGHT" x="-16" />
        </Anchors>
    </ButtonText>
    <NormalFont style="GameFontHighlight" />
    <HighlightFont style="GameFontHighlight" />
    <Layers>
        <Layer level="ARTWORK">
            <Texture atlas="hud-MainMenuBar-arrowdown-down" useAtlasSize="true">
                <Anchors>
                    <Anchor point="RIGHT" x="-4" y="1" />
                </Anchors>
            </Texture>
        </Layer>
    </Layers>
</Button>

<Frame name="LiteMountRuleEditCondition" mixin="LiteMountRuleEditConditionMixin" inherits="LiteMountListButtonStyleTemplate" virtual="true">
    <Size y="56" />

    <Scripts>
        <OnLoad inherit="prepend" method="OnLoad" />
        <OnLoad inherit="prepend" method="OnShow" />
    </Scripts>

    <Layers>
        <Layer level="ARTWORK">
            <FontString parentKey="NumText" inherits="GameFontNormalLarge" justifyH="CENTER">
                <Size x="24" />
                <Anchors>
                    <Anchor point="LEFT" x="8" />
                </Anchors>
            </FontString>
        </Layer>
    </Layers>
    <Frames>
        <Button parentkey="TypeDropDown" inherits="LiteMountRuleEditDropDownButtonTemplate">
            <Size x="192" y="33" />
            <Anchors>
                <Anchor point="LEFT" relativeKey="$parent.NumText" relativePoint="RIGHT" x="8" />
            </Anchors>
        </Button>
        <Button parentkey="ArgDropDown" inherits="LiteMountRuleEditDropDownButtonTemplate" hidden="true">
            <Size y="33" />
            <Anchors>
                <Anchor point="LEFT" relativeKey="$parent.TypeDropDown" relativePoint="RIGHT" x="8" />
                <Anchor point="RIGHT" x="-16" />
            </Anchors>
        </Button>
        <EditBox parentkey="ArgText" autofocus="false" letters="40" inherits="LargeInputBoxTemplate" hidden="true">
            <Size y="33" />
            <Anchors>
                <Anchor point="LEFT" relativeKey="$parent.TypeDropDown" relativePoint="RIGHT" x="8" y="-2" />
                <Anchor point="RIGHT" x="-16" />
            </Anchors>
        </EditBox>
        <Frame name="$parentDropDown" parentKey="DropDown" inherits="UIDropDownMenuTemplate" />
    </Frames>
</Frame>

<Frame name="LiteMountRuleEditAction" mixin="LiteMountRuleEditActionMixin" inherits="LiteMountListButtonStyleTemplate" virtual="true">
    <Scripts>
        <OnLoad method="OnLoad" inherit="prepend" />
    </Scripts>
    <Size y="56" />
    <Frames>
        <Button parentkey="TypeDropDown" inherits="LiteMountRuleEditDropDownButtonTemplate">
            <Size x="192" y="33" />
            <Anchors>
                <Anchor point="LEFT" x="40" />
            </Anchors>
        </Button>
        <Button parentkey="ArgDropDown" inherits="LiteMountRuleEditDropDownButtonTemplate" hidden="true">
            <Size y="33" />
            <Anchors>
                <Anchor point="LEFT" relativeKey="$parent.TypeDropDown" relativePoint="RIGHT" x="8" />
                <Anchor point="RIGHT" x="-16" />
            </Anchors>
        </Button>
        <Frame name="$parentDropDown" parentKey="DropDown" inherits="UIDropDownMenuTemplate" />
    </Frames>
</Frame>

<Frame name="LiteMountRuleEdit" mixin="LiteMountRuleEditMixin" inherits="TooltipBackdropTemplate" frameStrata="DIALOG" parent="UIParent">

    <Size x="623" y="568" />

    <!-- XXX DEBUGGING XXX -->
    <Anchors> <Anchor point="TOP" y="-160" /> </Anchors>

    <Scripts>
        <OnLoad inherit="prepend">
            for i = 2, #self.Conditions do
                self.Conditions[i]:SetPoint('TOPLEFT', self.Conditions[i-1], 'BOTTOMLEFT', 0, -4)
                self.Conditions[i]:SetPoint('RIGHT', self.Conditions[i-1], 'RIGHT')
            end
        </OnLoad>
    </Scripts>

    <Layers>
        <Layer level="ARTWORK">
            <!-- XXX LOCALIZE -->
            <FontString parentKey="ConditionsHeader" inherits="GameFontNormalHuge" text="Conditions">
                <Anchors> <Anchor point="TOPLEFT" x="24" y="-16" /> </Anchors>
            </FontString>
        </Layer>
    </Layers>

    <Frames>
        <Button inherits="UIPanelCloseButton">
            <Anchors>
                <Anchor point="TOPRIGHT" x="-4" y="-4" />
            </Anchors>
        </Button>

        <Frame parentArray="Conditions" inherits="LiteMountRuleEditCondition" id="1">
            <Anchors>
                <Anchor point="LEFT" x="16" />
                <Anchor point="TOP" relativeKey="$parent.ConditionsHeader" relativePoint="BOTTOM" y="-12" />
                <Anchor point="RIGHT" x="-16" />
            </Anchors>
        </Frame>
        <Frame parentArray="Conditions" inherits="LiteMountRuleEditCondition"  id="2"/>
        <Frame parentArray="Conditions" inherits="LiteMountRuleEditCondition"  id="3"/>
    </Frames>

    <Layers>
        <Layer level="ARTWORK">
            <!-- XXX LOCALIZE -->
            <FontString parentKey="ActionHeader" inherits="GameFontNormalHuge" text="Action">
                <Anchors> <Anchor point="TOPLEFT" x="24" y="-244" /> </Anchors>
            </FontString>
        </Layer>
    </Layers>

    <Frames>
        <Frame parentKey="Action" inherits="LiteMountRuleEditAction">
            <Anchors>
                <Anchor point="LEFT" x="16" />
                <Anchor point="TOP" relativeKey="$parent.ActionHeader" relativePoint="BOTTOM" y="-12" />
                <Anchor point="RIGHT" x="-16" />
            </Anchors>
        </Frame>
    </Frames>
</Frame>

</Ui>
